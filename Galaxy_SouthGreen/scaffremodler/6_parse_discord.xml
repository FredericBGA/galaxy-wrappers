<tool id="6_parse_discord" name="6_parse_discord" version="0.1">
    <description> : Parse mapped reads based on their discordance type</description>
    <command>
		source $__tool_directory__/include_scaffremodler.sh ;
        $__tool_directory__/6_parse_discord.py
		#if $input.have_config == "yes"
			--config $input.config
        #end if       
        #if $input.have_config == "no"
			--sam $input.sam
			--type $input.type
			--chr $input.chr
			--sort $input.sort
			--orient $input.orient
			--mini_dis $input.mini_dis
			--mini $input.mini
			--maxi $input.maxi
        #end if
		--out_ins $out_ins
		--out_del $out_del
		--out_fr $out_fr
		--out_rf $out_rf
		--out_ff $out_ff
		--out_rr $out_rr
		--out_chr_fr $out_chr_fr
		--out_chr_rf $out_chr_rf
		--out_chr_ff $out_chr_ff
		--out_chr_rr $out_chr_rr
		--out_discarded $out_discarded
		--discord_prop $discord_prop
		--liste_type $liste_type
    </command>
    <inputs>
        <conditional name="input">
            <param name="have_config" type="select" label="Do you have a config file?">
				<option value="yes">yes</option>
				<option value="no">no</option>
            </param>
            <when value="yes">
                <param name="config" type="data" label="conf file"/>
            </when>
            <when value="no">
				<param name="sam" type="data" label="Sam/bam file" />
				<param name="type" type="select" label="Is it a sam or a bam?">
					<option value="bam">bam</option>
					<option value="sam">sam</option>
				</param>
				<param name="chr" type="data" label="Chromosome file (generated by 1_create_conf or tabulated file with chr_name in col1 and length in col2)" />
				<param name="sort" type="select" label="Sort order of the sam/bam input">
					<option value="coordinate">coordinate</option>
					<option value="queryname">queryname</option>
					<option value="unsorted">unsorted</option>
				</param>
				<param name="orient" type="select" label="The upstream/downstream mate orientation for valid paired-end alignment against the forward reference strand">
					<option value="rf">RF</option>
					<option value="fr">FR</option>
				</param>
				<param name="mini_dis" type="integer" value="10000" label="Minimal insert size to keep the discordant read for structural variation search" />
				<param name="mini" type="integer" value="2500" label="Minimum good fragment length" />
				<param name="maxi" type="integer" value="7500" label="Maximum good fragment length" />
            </when>
        </conditional>
		<param name="OUT" type="text" label="Identifier for output" />
    </inputs>
    <outputs>
        <data format="bam" name="out_ins" label="$OUT ins.bam" />
        <data format="bam" name="out_del" label="$OUT del.bam" />
        <data format="bam" name="out_fr" label="$OUT fr.bam" />
        <data format="bam" name="out_rf" label="$OUT rf.bam" />
        <data format="bam" name="out_ff" label="$OUT ff.bam" />
        <data format="bam" name="out_rr" label="$OUT rr.bam" />
        <data format="bam" name="out_chr_fr" label="$OUT chr-fr.bam" />
        <data format="bam" name="out_chr_rf" label="$OUT chr-rf.bam" />
        <data format="bam" name="out_chr_ff" label="$OUT chr-ff.bam" />
        <data format="bam" name="out_chr_rr" label="$OUT chr-rr.bam" />
        <data format="bam" name="out_discarded" label="$OUT discarded.bam" />
        <data format="txt" name="discord_prop" label="$OUT proportion" />
        <data format="txt" name="liste_type" label="$OUT list_dis" />
    </outputs>
    <help>
    </help>
</tool>