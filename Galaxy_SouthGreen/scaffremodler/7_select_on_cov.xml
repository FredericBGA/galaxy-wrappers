<tool id="7_select_on_cov" name="7_select_on_cov" version="0.1">
    <description> : Identify discordant zones</description>
    <command>
		source $__tool_directory__/include_scaffremodler.sh ;
        $__tool_directory__/7_select_on_cov.py
		--sam $sam
		#if $input.have_config == "yes"
			--config $input.config
        #end if       
        #if $input.have_config == "no"
			--type $input.type
			--ref $input.ref
			--chr $input.chr
			--min_zone $input.min_zone
			--mincov $input.mincov
			--maxcov $input.maxcov
			--min_gap $input.min_gap
			--ecart $input.ecart
			--max_dist_merge $input.max_dist_merge
			--YiS $input.YiS
			--MiS $input.MiS
			--YiC $input.YiC
			--MiC $input.MiC
			--min_score $input.min_score
        #end if
		--out $out
    </command>
    <inputs>
		<param name="sam" type="data" label="Sam/bam discordant file" />
        <conditional name="input">
            <param name="have_config" type="select" label="Do you have a config file?">
				<option value="yes">yes</option>
				<option value="no">no</option>
            </param>
            <when value="yes">
                <param name="config" type="data" label="conf file"/>
            </when>
            <when value="no">
				<param name="ref" type="data" label="Multifasta reference file" />
				<param name="chr" type="data" label="Chromosome file (generated by 1_create_conf or tabulated file with chr_name in col1 and length in col2)" />
				<param name="type" type="select" label="Is it a sam or a bam?">
					<option value="bam">bam</option>
					<option value="sam">sam</option>
				</param>
				<param name="min_zone" type="integer" value="500" label="Minimal number of covered sites in the zone" />
				<param name="mincov" type="float" value="0" label="Minimal median coverage accepted" />
				<param name="maxcov" type="float" value="300" label="Maximal median coverage accepted" />
				<param name="min_gap" type="integer" value="300" label="Maximal median coverage accepted" />
				<param name="ecart" type="float" value="2000" label="Value that will be added or substracted to keep a read as the same destination" />
				<param name="max_dist_merge" type="integer" value="1000" label="Maximal distance between two discordant zone to merge" />
				<param name="YiS" type="float" value="0" label="Y-intercept of the linear function for zone size that will give the first component of product giving the score" />
				<param name="MiS" type="float" value="1000" label="Minimal zone size for which the first component of product giving the score will be maximal" />
				<param name="YiC" type="float" value="0" label="Y-intercept of the linear function for coverage that will give the second component of product giving the score" />
				<param name="MiC" type="float" value="25" label="Minimal zone coverage for which the second component of product giving the score will be maximal" />
				<param name="min_score" type="float" value="70" label="Minimal score for a discordant zone to be identified as passed" />
            </when>
        </conditional>
		<param name="OUT" type="text" label="Identifier for output" />
    </inputs>
    <outputs>
        <data format="txt" name="out" label="$OUT score" />
    </outputs>
    <help>
    </help>
</tool>